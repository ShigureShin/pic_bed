#computer 

---
## 内存的基本概念

程序执行前需要先将程序数据放到内存中才能被 CPU 处理

给内存的存储单元编地址从而区分各个位置，内存地址从 0 开始，*每个地址对应一个存储单元*
- 如果“*按字节编址*”，每个存储单元大小为 1 字节，1 B，8 bit
- 如果“*字长 16 位*”的计算机，“*按字编址*”，则每个存储单元大小为 1 个字，16 bit 

几个常用数量单位：
- $2^{10}=1K,\ 千$
- $2^{20}=1M,\ 兆，百万$
- $2^{30}=1G,\ 十亿，千兆$

## 进程运行的基本原理

- **逻辑地址（相对地址）**：程序经过编译、链接后生成的指令中指明的是逻辑地址，即相对于进程的其实地址而言的地址
- **物理地址（绝对地址）**：内存中的真实地址

## 从写程序到程序运行

![](../../img/Pasted%20image%2020231230093503.png)

### 装入

三种地址装入策略：
- 绝对装入
- 可重定位装入（静态重定位）
- 动态运行时装入（动态重定位）

#### 绝对装入
- 编译时，编译程序根据给定将要存放的内存中的位置产生绝对地址的目标代码。
- 装入程序按照装入模块中的地址，将程序和数据放入内存
- 如图，即*在编译时就将逻辑地址转换为物理地址*![](../../img/Pasted%20image%2020231230092607.png)
- *前提*：需要提前知道将要装入的位置
- *只适合单道程序环境*
- 灵活性低，更换运行设备很可能无法运行

#### 可重定位装入

**静态重定位**：可重定位装入。编译、链接后的装入模块地址都是从 0 开始，指令中使用的地址、数据地址都是相对于起始地址而言的逻辑地址。
- 地址变换是*在装入时一次完成*的
- 需要在作业*装入内存时，分配其要求的全部内存空间*，如果空间不够则无法装入
- 程序装入内存后，*运行期间无法移动*

#### 动态重定位

**动态重定位**（现代计算机使用的技术）：动态运行时装入。编译、链接后的装入模块地址都是从 0 开始。装入程序把装入模块装入内存后，等到*程序真正执行时才进行地址转换*。需要一个*重定位寄存器*支持，用于*存放进程的起始地址*
- 允许程序在内存中移动
- 可以把程序分配到不连续的存储区
- 程序运行前只需要装入部分代码就可以运行，运行期间可以根据动态需要分配内存
- 方便程序段的共享，可以向用户提供一个比存储空间大得多的地址空间

### 链接

三种链接方式

#### 静态链接

- **静态链接**：程序运行前将各目标模块及所需的库函数连接成一个完整的可执行文件（装入模块），此时已经确定完整的逻辑地址

#### 装入时动态链接

- **装入时动态链接**：将目标模块装入内存时，边装入边链接

#### 运行时动态链接

- **运行时动态链接**：在程序执行中需要某目标模块时，才会进行链接
	- 优点：便于修改和更新，实现对目标模块的共享






