#computer 

---
### 中断的作用

CPU 上的两种程序：
- 操作系统的内核程序
- 应用程序

合适情况下，操作系统内核会把 CPU 使用权主动让给应用程序，而应用程序此时会一直在 CPU 上运行下去，除非*操作系统发出中断信号从而重新夺回 CPU 的使用权*（唯一途径）

“中断”：CPU 由用户态变为内核态，从而操作系统重新夺回 CPU 的控制权

### 中断的类型

#### 内中断（异常、例外）

与当前执行的指令*有关*，中断信号来自 *CPU 内部*

- 陷阱、陷入 trap：陷入指令引发，程序故意引发（*系统调用*）
- 故障 fault：错误条件引起，可能被内核程序修复
- 中止 abort：致命错误引起，内核程序无法修复，CPU 使用权不会还给程序，而是直接终止。如整数除 0、非法使用特权指令

#### 外中断（中断）

与当前执行的指令*无关*，中断信号来自 *CPU 外部*

- 时钟中断
-  IO/请求中断

### 中断机制的基本原理

根据不同的中断信号，使用不同的中断处理程序进行处理。

- 检查中断信号
	- 内中断：CPU 在执行指令时会检查是否有异常发生
	- 外中断：每个指令周期末尾，CPU 都会检查是否有外中断信号需要处理
- 找到相应的中断处理程序
	- 通过*中断向量表*实现
