#computer 

---
# 操作码、地址码的概念

![](../img/Pasted%20image%2020231211114526.png)

- 指令格式：操作码+地址码
	- *有的指令不需要地址码*，比如停机指令

- **问题**：如何设计各种各样的指令？

# 指令的分类

指令：计算机执行某种操作的命令，是计算机运行的最小功能单位

一台计算机所有指令的集合构成该计算机的*指令系统*，即*指令集*

不同计算机之间可能存在不同的指令集，如x86架构（Intel）、ARM架构（手机）

## 根据地址码数目不同分类

- 零地址指令
	- 不需要操作数
		- 如，空操作、停机、关中断等
	- 堆栈计算机
		- 两个操作数*隐含*存放在栈顶和次栈顶，计算结果压回栈顶（**后缀表达式**）
- 一地址指令![](../img/Pasted%20image%2020231211115253.png)
	- 只需要单操作数
		- +1、-1、取反、求补
		- OP(A1) -> A1
		- 三次访存：取指令、读A1、写A1
	- 只需要两个操作数，其中一个隐含在寄存器中（如ACC中）
		- (ACC)OP(A1) -> ACC
		- 两次访存：取指令、读A1
- 二地址指令![](../img/Pasted%20image%2020231211115303.png)
	- 两个操作数的算术运算、逻辑运算相关
	- (A1)OP(A2) -> A1
	- 四次访存：取指令、读A1、读A2、写A1
- 三地址指令![](../img/Pasted%20image%2020231211115313.png)
	- (A1)OP(A2) -> A3
	- 四次访存：取指令、读A1、读A2、写A3
- 四地址指令![](../img/Pasted%20image%2020231211115322.png)
	- (A1)OP(A2) -> A3，A4=下一条将要执行指令的地址（跳着执行）
	- 四次访存：取指令、读A1、读A2、写A3

地址码的位数有什么影响？
- n位地址码的直接寻址范围2^n
- 指令总长固定不变，则地址码数量（位数）越多，寻址能力越差

## 根据指令长度分类

- **指令字长**：一条指令的总长度（可变）
	- 影响取指令的时间
	- 如，机器字长=存储字长=16bit，则取一条双字长指令需要两次访存
- 机器字长：cpu进行*一次整数运算*所能处理的*二进制数据的位数*（与ALU直接相关）
- 存储字长：一个*存储单元*中的二进制代码位数（MDR位数相同）主存

半字长指令、单字长指令、双字长指令：指令长度是机器字长的多少倍

- **定长指令字结构**：指令系统中所有指令长度相等
- **变长指令字节构**：各种指令长度不等

## 根据指令的操作码的长度不同分类

反应最多执行多少条指令，例如n位操作码，最多可以对应2^n条指令

- **定长操作码**
	- 译码电路设计简单，但灵活性较低
- **可变长操作码**
	- 译码电路设计复杂，但灵活性更高

- 定长*指令*字结构 + 可变长*操作码* -> 扩展操作码指令格式

## 根据操作类型分类

- 数据传送类：主存和cpu之间数据传送
	- LOAD：存储器中取到寄存器中
	- STORE：寄存器存到存储器
- 运算类
	- 算术逻辑操作
		- 算术
		- 逻辑
	- 移位操作
- 程序控制类：改变程序执行顺序
	- **转移操作类**：PC发生改变
		- *程序执行流的变化*
- 输入输出操作类
	- CPU寄存器与IO端口之间的数据传送

# 扩展操作码

- 指令格式
	- **定长指令字结构**
- 指令的操作码
	- **定长操作码**
	- **可变长操作码**
- 定长*指令*字结构 + 可变长*操作码* -> 扩展操作码指令格式

一种扩展操作码的设计：![](../img/Pasted%20image%2020231211120708.png)
- 可以直接根据有几组操作码全1来判断是几地址指令

需要注意的两点：
- **不允许短码是长码的前缀**
	- 例如三地址操作码比而二地址操作码短，则而地址操作码中前边部分不能与三地址操作码出现同样的情况
- 各指令操作码一定不能重复

使用频率较高的指令，分配更短的操作码
- 减少指令译码和分析的时间

![](../img/Pasted%20image%2020231211133216.png)





